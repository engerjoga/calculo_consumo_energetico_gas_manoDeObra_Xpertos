<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="Calculadora de costos de producción: electricidad, gas y mano de obra por lote o producto." />
<title>Calculadora de Costos de Producción</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f8f9fa;
    margin: 0; padding: 0;
    color: #212529;
  }
  header {
    text-align: center;
    padding: 2rem 1rem;
    background: #343a40;
    color: #fff;
  }
  header img {
    max-width: 180px;
    height: auto;
    margin: 0 auto 1rem;
  }
  .container {
    max-width: 900px;
    margin: 2rem auto;
    padding: 0 1rem;
  }
  .card {
    background: #fff;
    padding: 1.25rem 1.5rem;
    margin-bottom: 2rem;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgb(0 0 0 / 0.1);
    transition: box-shadow 0.3s ease;
  }
  .card:hover {
    box-shadow: 0 4px 16px rgb(0 0 0 / 0.15);
  }
  h3 {
    color: #007bff;
    margin-bottom: 1rem;
    font-weight: 600;
  }
  label {
    display: block;
    font-weight: 600;
    margin-top: 1rem;
  }
  input, select, button {
    width: 100%;
    padding: 0.5rem 0.75rem;
    margin-top: 0.25rem;
    border-radius: 5px;
    border: 1px solid #ccc;
    font-size: 1rem;
    box-sizing: border-box;
    transition: border-color 0.3s ease;
  }
  input:focus, select:focus {
    border-color: #007bff;
    outline: none;
  }
  button.calc {
    background: #28a745;
    color: #fff;
    border: none;
    cursor: pointer;
    margin-top: 1rem;
    font-weight: 700;
    font-size: 1.1rem;
    border-radius: 6px;
    transition: background-color 0.3s ease;
  }
  button.calc:hover, button.calc:focus {
    background: #218838;
  }
  .hint {
    font-size: 0.85rem;
    color: #6c757d;
    margin-top: 0.25rem;
  }
  .result {
    margin-top: 1rem;
    padding: 1rem;
    background: #e9ecef;
    border-radius: 6px;
    font-weight: 600;
    font-size: 1.1rem;
    color: #212529;
    min-height: 2em;
  }
  .error {
    color: #dc3545;
    font-weight: 600;
    margin-top: 0.5rem;
  }
</style>
</head>
<body>

<header>
  <img src="xpertos_blanco.png" alt="Logo de Xpertos" />
  <h1>Calculadora de Costos de Producción</h1>
  <p>Estima el costo eléctrico, de gas y de mano de obra por lote o producto</p>
</header>

<main class="container" role="main">

  <!-- ELECTRICIDAD -->
  <section class="card" id="card-electricidad" aria-labelledby="electricidad-title">
    <h3 id="electricidad-title">Electricidad</h3>

    <label for="potencia">Consumo del equipo (W)</label>
    <input id="potencia" type="number" min="0" step="1" placeholder="Ej: 300" aria-describedby="potenciaHelp" />
    <div class="hint" id="potenciaHelp">Potencia que consume el equipo, en Watts (ver etiqueta o manual).</div>

    <label for="tiempoUsoElect">Duración de un lote (h)</label>
    <input id="tiempoUsoElect" type="number" min="0" step="0.01" placeholder="Ej: 0.5" aria-describedby="tiempoUsoElectHelp" />
    <div class="hint" id="tiempoUsoElectHelp">Tiempo que el equipo está encendido para producir un lote, en horas.</div>

    <label for="frecuencia">Lotes al mes</label>
    <input id="frecuencia" type="number" min="0" step="1" placeholder="Ej: 10" aria-describedby="frecuenciaHelp" />
    <div class="hint" id="frecuenciaHelp">Cantidad de lotes que produces en un mes.</div>

    <label for="precioKwh">Costo por kWh de electricidad</label>
    <input id="precioKwh" type="number" min="0" step="0.0001" placeholder="Ej: 0.20" aria-describedby="precioKwhHelp" />
    <div class="hint" id="precioKwhHelp">Precio por kWh según tu factura de electricidad.</div>

    <div class="hint">Fórmula: (W × horas × lotes) ÷ 1000 × costo kWh</div>
    <button class="calc" type="button" onclick="calcularElectricidad()">Calcular Electricidad</button>
    <div id="resultadoElect" class="result" aria-live="polite"></div>
  </section>

  <!-- GAS -->
  <section class="card" id="card-gas1" aria-labelledby="gas-title">
    <h3 id="gas-title">Gas</h3>

    <label for="btuCilindro1">Capacidad total de gas del cilindro (BTU)</label>
    <input id="btuCilindro1" type="number" min="0" step="1" value="91500" aria-describedby="btuCilindroHelp" />
    <div class="hint" id="btuCilindroHelp">Valor típico para cilindro de 25 lb: 91,500 BTU.</div>

    <label for="btuQuemador1">Potencia del quemador (BTU/h)</label>
    <select id="btuQuemador1" aria-describedby="btuQuemadorHelp">
      <option value="">-- Selecciona quemador --</option>
      <option value="5000">Pequeño: 5,000–8,000 BTU/h</option>
      <option value="9000">Mediano: 9,000–12,000 BTU/h</option>
      <option value="15000">Grande: 15,000–18,000 BTU/h</option>
    </select>
    <div class="hint" id="btuQuemadorHelp">Revisa las especificaciones del quemador o manual.</div>

    <label for="tiempoUsoGas1">Duración de uso del quemador por lote (h)</label>
    <input id="tiempoUsoGas1" type="number" min="0" step="0.01" placeholder="Ej: 1" aria-describedby="tiempoUsoGasHelp" />
    <div class="hint" id="tiempoUsoGasHelp">Tiempo que el quemador está encendido para un lote.</div>

    <label for="precioCilindro1">Costo de llenado del cilindro</label>
    <input id="precioCilindro1" type="number" min="0" step="0.01" placeholder="Ej: 25.00" aria-describedby="precioCilindroHelp" />
    <div class="hint" id="precioCilindroHelp">Precio que pagas por rellenar o cambiar el cilindro.</div>

    <div class="hint">Fórmula: (BTU/h × horas) ÷ BTU cilindro × costo cilindro</div>
    <button class="calc" type="button" onclick="calcularGas(1)">Calcular Gas</button>
    <div id="resultadoGas1" class="result" aria-live="polite"></div>
  </section>

  <!-- TIEMPO -->
  <section class="card" id="card-tiempo" aria-labelledby="tiempo-title">
    <h3 id="tiempo-title">Tiempo de trabajo</h3>

    <label for="tiempoLoteMin">Duración total de producción por lote (min)</label>
    <input id="tiempoLoteMin" type="number" min="0" step="0.1" placeholder="Ej: 120" aria-describedby="tiempoLoteMinHelp" />
    <div class="hint" id="tiempoLoteMinHelp">Incluye preparación, cocción y empaquetado.</div>

    <label for="cantidadProductos">Unidades producidas por lote</label>
    <input id="cantidadProductos" type="number" min="1" step="1" placeholder="Ej: 20" aria-describedby="cantidadProductosHelp" />
    <div class="hint" id="cantidadProductosHelp">Cantidad de piezas o productos terminados en un lote.</div>

    <label for="salarioHora">Costo por hora de mano de obra</label>
    <input id="salarioHora" type="number" min="0" step="0.01" placeholder="Ej: 8.00" aria-describedby="salarioHoraHelp" />
    <div class="hint" id="salarioHoraHelp">Lo que te pagas a ti mismo o a un trabajador por hora.</div>

    <div class="hint">Fórmula por producto: (min ÷ 60 ÷ unidades) × costo/hora</div>
    <button class="calc" type="button" onclick="calcularTiempo()">Calcular Tiempo</button>
    <div id="resultadoTiempo" class="result" aria-live="polite"></div>
  </section>

</main>

<script>
  // Función para validar que los campos sean positivos y no nulos
  function validarCampos(campos) {
    for (const {id, nombre, min} of campos) {
      const valor = parseFloat(document.getElementById(id).value);
      if (isNaN(valor) || valor < min) {
        return `Por favor, ingresa un valor válido para "${nombre}".`;
      }
    }
    return null;
  }

  function mostrarResultado(id, mensaje, isError = false) {
    const div = document.getElementById(id);
    div.style.display = "block";
    div.textContent = mensaje;
    if (isError) {
      div.classList.add("error");
    } else {
      div.classList.remove("error");
    }
  }

  function calcularElectricidad() {
    const campos = [
      {id: "potencia", nombre: "Consumo del equipo (W)", min: 0.1},
      {id: "tiempoUsoElect", nombre: "Duración de un lote (h)", min: 0.01},
      {id: "frecuencia", nombre: "Lotes al mes", min: 1},
      {id: "precioKwh", nombre: "Costo por kWh de electricidad", min: 0.001},
    ];
    const error = validarCampos(campos);
    if (error) {
      mostrarResultado("resultadoElect", error, true);
      return;
    }
    const W = parseFloat(document.getElementById("potencia").value);
    const horas = parseFloat(document.getElementById("tiempoUsoElect").value);
    const lotes = parseFloat(document.getElementById("frecuencia").value);
    const precio = parseFloat(document.getElementById("precioKwh").value);
    const total = (W * horas * lotes / 1000) * precio;
    mostrarResultado("resultadoElect", `Costo mensual: $${total.toFixed(2)}`);
  }

  function calcularGas(num) {
    const campos = [
      {id: `btuCilindro${num}`, nombre: "Capacidad total de gas del cilindro (BTU)", min: 1},
      {id: `btuQuemador${num}`, nombre: "Potencia del quemador (BTU/h)", min: 1},
      {id: `tiempoUsoGas${num}`, nombre: "Duración de uso del quemador por lote (h)", min: 0.01},
      {id: `precioCilindro${num}`, nombre: "Costo de llenado del cilindro", min: 0.01},
    ];
    const error = validarCampos(campos);
    if (error) {
      mostrarResultado(`resultadoGas${num}`, error, true);
      return;
    }
    const btuCil = parseFloat(document.getElementById(`btuCilindro${num}`).value);
    const btuQuem = parseFloat(document.getElementById(`btuQuemador${num}`).value);
    const horas = parseFloat(document.getElementById(`tiempoUsoGas${num}`).value);
    const precioCil = parseFloat(document.getElementById(`precioCilindro${num}`).value);
    const total = ((btuQuem * horas) / btuCil) * precioCil;
    mostrarResultado(`resultadoGas${num}`, `Costo por lote: $${total.toFixed(2)}`);
  }

  function calcularTiempo() {
    const campos = [
      {id: "tiempoLoteMin", nombre: "Duración total de producción por lote (min)", min: 0.1},
      {id: "cantidadProductos", nombre: "Unidades producidas por lote", min: 1},
      {id: "salarioHora", nombre: "Costo por hora de mano de obra", min: 0.01},
    ];
    const error = validarCampos(campos);
    if (error) {
      mostrarResultado("resultadoTiempo", error, true);
      return;
    }
    const min = parseFloat(document.getElementById("tiempoLoteMin").value);
    const unidades = parseFloat(document.getElementById("cantidadProductos").value);
    const salario = parseFloat(document.getElementById("salarioHora").value);
    const total = (min / 60 / unidades) * salario;
    mostrarResultado("resultadoTiempo", `Costo por unidad: $${total.toFixed(2)}`);
  }
</script>

</body>
</html>
